<!DOCTYPE html>
<html>
  <head>
    <title>üçã Dalt</title>
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.0.3/socket.io.js"></script>
    <meta charset="UTF-8">
  </head>
  <body>
    <div class="outlet-panel" id="outlet-panel">
      <script>
        let html = '';
        for (let i = 0; i < 4; i++) {
          html += `
            <div class="outlet-fixture" id="outlet-fixture-${i}">
              <div class="outlet-single" id="outlet-single-${i*2+1}">
              </div>
              <div class="outlet-single" id="outlet-single-${i*2+2}">
              </div>
            </div>
          `;
        }
        $('outlet-panel').append(html);
      </script>
    </div>
    <h2>Outlet 1</h2>

    <button type="button" id="state" onclick="sendOutletState(1, true);" style="background-color:green;">ON</button>
    <button type="button" id="state" onclick="sendOutletState(1, false);" style="background-color:red;">OFF</button>
    <script>
      var socket = io.connect();

      function updateOutletState(outlet, state) {
        const divId = `outlet-single-${outlet}`;
        const oldClass = `outlet-state-${!state ? 'true' : 'false'}`;
        const newClass = `outlet-state-${state ? 'true' : 'false'}`;
      }

      function sendOutletState(outlet, state) {
        const data = {
          outlet: outlet,
          state: state,
        };
        socket.emit('outletState', JSON.stringify(data, null, 2));
      }

      socket.on('outletState', (data) => {
        const decodedData = JSON.parse(data);
        const divId = `outlet-single-${outlet}`;
        const oldState = !
        $(divId).removeClass(`outlet-state
        console.log(data);
      });

    </script>
  </body>
</html>

